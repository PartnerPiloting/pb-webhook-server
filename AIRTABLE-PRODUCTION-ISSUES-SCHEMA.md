# Airtable Table Schema: Production Issues

## Table Information
- **Table Name:** `Production I13. **Fix Notes**
  15. **Render Log URL**
    - Type: `URL`
    - Description: Direct link to Render logs (valid for 7 days)
    - Example: https://dashboard.render.com/web/srv-xyz/logs?start=1728316995

---

### Optional Fields (3 fields - for advanced tracking)

16. **Occurrences**`Long text`
    - Description: Explanation of what was done to fix it
    - Enable rich text: No
    - Example: "Fixed field name typo in leadService.js line 145. Changed 'Errors' to 'Error_Messages'. Committed as a3b2c1d."

14. **Fix Commit**
- **Location:** Master Clients Base (same base as "Clients" table)
- **Purpose:** Store filtered production errors from Render logs for debugging and tracking

---

## Field Definitions (18 Fields Total)

### Core Fields (7 fields - REQUIRED)

1. **Issue ID**
   - Type: `Auto number`
   - Description: Unique identifier for each issue
   - Auto-generated by Airtable

2. **Timestamp**
   - Type: `Date and time`
   - Description: When the error occurred
   - Format: Include time
   - Time zone: Your local timezone

3. **Severity**
   - Type: `Single select`
   - Options (in order):
     - `CRITICAL` (red)
     - `ERROR` (orange)
     - `WARNING` (yellow)
   - Description: Priority level for fixing

4. **Pattern Matched**
   - Type: `Single line text`
   - Description: Which error pattern caught this issue
   - Example: "Unknown field name", "Stack trace detected", "HTTP 500 error"

5. **Error Message**
   - Type: `Long text`
   - Description: The actual error text
   - Enable rich text: No
   - Example: "Unknown field name: Errors"

6. **Context**
   - Type: `Long text`
   - Description: 50 lines of log output surrounding the error
   - Enable rich text: No
   - This is the key field for debugging

7. **Status**
   - Type: `Single select`
   - Options (in order):
     - `NEW` (red)
     - `INVESTIGATING` (yellow)
     - `FIXED` (green)
     - `IGNORED` (gray)
   - Description: Track fix progress
   - Default: `NEW`

---

### Metadata Fields (4 fields - for debugging context)

8. **Stack Trace**
   - Type: `Long text`
   - Description: Full stack trace if error has one
   - Enable rich text: No
   - May be empty for API errors

9. **Run Type**
   - Type: `Single select`
   - Options:
     - `smart-resume`
     - `batch-score`
     - `apify-webhook`
     - `api-endpoint`
     - `scheduled-job`
     - `other`
   - Description: What type of operation was running

10. **Client ID**
    - Type: `Single line text`
    - Description: Which client was affected (if applicable)
    - Example: "Guy Wilson", "John Smith"

11. **Service/Function**
    - Type: `Single line text`
    - Description: Specific code location or function name
    - Example: "processClientRun", "updateLeadRecord", "scoreLeadBatch"

---

### Tracking Fields (3 fields - for fix management)

12. **Fixed Time**
    - Type: `Date and time`
    - Description: When the issue was resolved (includes date and time)
    - Format: Include time

13. **Fix Notes**
    - Type: `Long text`
    - Description: Explanation of what was done to fix it
    - Enable rich text: No
    - Example: "Fixed field name typo in leadService.js line 145. Changed 'Errors' to 'Error_Messages'. Committed as a3b2c1d."

14. **Fix Commit**
    - Type: `Single line text`
    - Description: Git commit hash of the fix
    - Example: "a3b2c1d" or "a3b2c1d4e5f6789"

---

### Reference Fields (1 field)

15. **Render Log URL**
    - Type: `URL`
    - Description: Direct link to Render logs (valid for 7 days)
    - Example: https://dashboard.render.com/web/srv-xyz/logs?start=1728316995

---

### Optional Fields (3 fields - for advanced tracking)

16. **Occurrences**
    - Type: `Number`
    - Format: Integer
    - Description: How many times this exact error was seen
    - Default: 1
    - Incremented when same error is detected again

17. **First Seen**
    - Type: `Date and time`
    - Description: First occurrence of this error pattern
    - Format: Include time

18. **Last Seen**
    - Type: `Date and time`
    - Description: Most recent occurrence
    - Format: Include time

---

## Views to Create

### 1. üî• Critical Issues (Default View)
- Filter: `Status = NEW` AND `Severity = CRITICAL`
- Sort: `Timestamp` (newest first)
- Fields to show: Issue ID, Timestamp, Error Message, Pattern Matched, Client, Status

### 2. ‚ö†Ô∏è All New Issues
- Filter: `Status = NEW`
- Group by: `Severity`
- Sort: `Timestamp` (newest first)
- Fields to show: Issue ID, Timestamp, Severity, Error Message, Run Type, Client

### 3. üîß In Progress
- Filter: `Status = INVESTIGATING`
- Sort: `Timestamp` (oldest first - fix oldest bugs first)
- Fields to show: All fields

### 4. ‚úÖ Recently Fixed
- Filter: `Status = FIXED`
- Sort: `Fixed Date` (newest first)
- Fields to show: Issue ID, Timestamp, Fixed Date, Fixed By, Error Message, Fix Notes

### 5. üìä By Client
- Group by: `Client`
- Sort: `Timestamp` (newest first)
- Fields to show: Issue ID, Timestamp, Severity, Error Message, Status

---

## Setup Instructions

1. **Open Master Clients Base** in Airtable
2. **Create new table** named `Production Issues`
3. **Delete default fields** (Airtable creates Name, Notes, etc.)
4. **Add fields one by one** following the specifications above
   - Start with Core Fields (7)
   - Then Metadata Fields (4)
   - Then Tracking Fields (4)
   - Then Reference Fields (1)
   - Then Optional Fields (3)
5. **Create the 5 views** listed above
6. **Set default view** to "üî• Critical Issues"
7. **Verify** you have 18 fields total (plus any auto-generated fields like "Created Time")

---

## Estimated Setup Time
**10-15 minutes** to create all fields and views

---

## Notes
- Issue ID will auto-increment (1, 2, 3, etc.)
- All other fields will be populated by the backend code
- You can manually update Status, Fix Notes, and other fields as needed
- The Context field is the most important for debugging - it contains the log excerpt
